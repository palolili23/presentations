<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Teaching Demo - Undergrads</title>
    <meta charset="utf-8" />
    <meta name="author" content="L. Paloma Rojas-Saunero" />
    <meta name="date" content="2025-03-03" />
    <script src="index_files/header-attrs/header-attrs.js"></script>
    <link href="index_files/countdown/countdown.css" rel="stylesheet" />
    <script src="index_files/countdown/countdown.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="extra.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">





class: title-slide, center, middle, inverse
background-image: url(./figs/logo.png)
background-position: 50% 95%
background-size: 28%, 25%

# .yellow[Introduction to causality]


.center[

.bigger[
L. Paloma Rojas-Saunero MD, PhD]

]

---
## Learning goals

.bigger[

1. Develop intuition for counterfactual thinking and its role in causal inference.

2. Familiarize with causal notation .

3. Understand the concept of the individual causal effect and its implications.

]

---
## Recap

&lt;br&gt;

.center[.bigger[**Descriptive goal**]]

--

.center[.bigger[**Prediction goal**]]

--

.center[.bigger[_Causal goals_]]

---
## Correlation is not causation

.center[
&lt;img src=./figs/icecream1.JPG width="70%" /&gt;
]

???
In this example we see that Ice cream sales increase when people get sunburned.

These two things are correlated: meaning that they happen together, but one doesn't necessarily cause the other.

---
## Correlation is not causation

.center[
&lt;img src=./figs/icecream2.JPG width="70%"/&gt;
]

???
There could be another factor, such as as high temperature in a summer day that both causes people to buy icecream, and it causes sunburn!

---
background-image: url(./figs/causal_questions_epi.jpg)
background-size: 90%

???
In public health, many times we are interested in asking causal questions, we want to know if changing a behavior, changing diet, or even changing complex things such as discrimination and social and economic burden (a.k.a) weathering, can have an impact in our health. 

---
##  Counterfactual/Causal thinking

???
To answer these questions, we use counterfactual or causal thinking. Yes, the word "counterfactual" sounds very complicated, but I promise you, you are experts in using this approach in daily life. For example...


- If I had studied last night, would I have gotten a higher test score?

--

- If I hadnâ€™t walked barefoot, I would have avoided catching a cold.

--

- If they hadn't changed the goalkeeper, they would have won the penalty round.

--

- If you had taken Sunset Blvd. instead of Santa Monica Blvd., would you have arrived on time?


---
### Exercise: Construct a counterfactual statement

- Think of a recent event where something did not go as planned.

--

- Imagine an alternative version of the past where you changed one specific factor.

--

- Write a counterfactual statement using this structure:

.center[
"If [_X had done something differently_], &lt;br&gt; &lt;br&gt; then [_a different outcome might have happened_]."
]

<div class="countdown" id="timer_f5915f96" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">01</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
## Pair Discussion

- Share your statement with your classmate sitting to your right.

- Discuss: 

  + What assumption are you making about causality?

  + Are there other factors that might have influenced the outcome?

  + How confident are you in your counterfactual scenario?


<div class="countdown" id="timer_e3014a16" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">02</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
## Counterfactual Thinking

&lt;br&lt;br&gt;&lt;br&gt;
.center[
.bigger[
Counterfactual thinking involves imagining an alternative version of the past and considering how the outcome might have changed. It helps us think about "**_what could have been_**"]]

???
To formalize a bit, counterfactual thinking... and this is the set

---
## Causal Reasoning

&lt;br&gt;&lt;br&gt;

.center[
.bigger[
Causal reasoning involves understanding how a _change_ in one factor (**"the cause"**) 


leads to a change in another factor (**"the effect"**).

]]

---
class:center, middle


## Let's go for icecream, it will make you feel happy...

???
Now that you know you are experts in counterfactual thinking, we are going to translate the language of counterfactuals to mathematical notations.

I know that math can be intimidating, believe me I always did, but I want you to take this opportunity to see math as a universal language, a language that can help community across people all over the world.

---

## Notation

.pull-left[
**Observed world (The Factual) **

- A = 0 if did not eat &amp;#x274C;&amp;#x1F366;

- A = 1 if ate &amp;#x1F366;

- Y = 1 if &amp;#x1F60A;

- Y = 0 if &amp;#x1F614;

]

--
.pull-right[
**Counterfactual worlds** 
- Y&lt;sup&gt;a=1&lt;/sup&gt;: the counterfactual outcome (&amp;#x1F60A; or &amp;#x1F614;) had a = &amp;#x1F366;

- Y&lt;sup&gt;a=0&lt;/sup&gt;: the counterfactual outcome (&amp;#x1F60A; or &amp;#x1F614;) had a = &amp;#x274C;&amp;#x1F366;

]


---
## Individual Causal Effect

--
.pull-left[
.center[
If I had eaten &amp;#x1F366; I would feel &amp;#x1F60A;

.bigger[**Y&lt;sup&gt;a=1&lt;/sup&gt; = 1**]

]]

--

.pull-right[
.center[
If I had not eaten &amp;#x274C;&amp;#x1F366; I would feel &amp;#x1F614;

.bigger[**Y&lt;sup&gt;a=0&lt;/sup&gt; = 0**]
]]


&lt;br&gt;
.center[
.bigger[
There is an &amp;#x2705; **individual causal effect** when: **Y&lt;sup&gt;a=1&lt;/sup&gt;** `\(\neq\)` **Y&lt;sup&gt;a=0&lt;/sup&gt;**  
]]
--
.center[
.bigger[
There is no &amp;#x274C; **individual causal effect** when: **Y&lt;sup&gt;a=1&lt;/sup&gt;** = **Y&lt;sup&gt;a=0&lt;/sup&gt;** 
]]

---
### Exercise: Identifying Individual Causal Effects
Find out on which friends we would see a causal effect of  &amp;#x1F366; in  &amp;#x1F60A;

.pull-left[
.center[
** Individual Causal Effect** &lt;br&gt; &lt;br&gt;
**Y&lt;sup&gt;a=1&lt;/sup&gt;** `\(\neq\)` **Y&lt;sup&gt;a=0&lt;/sup&gt;** 
]
]
--

.pull-right[

|Person  |Y&lt;sup&gt;a=1&lt;/sup&gt; |Y&lt;sup&gt;a=0&lt;/sup&gt; |Effect |
|:-------|:---------------|:---------------|:------|
|Anita   |1               |0               |?      |
|James   |1               |0               |?      |
|Min     |1               |1               |?      |
|Jackson |0               |0               |?      |
|Jesse   |0               |1               |?      |
|Maria   |1               |0               |?      |
]


<div class="countdown" id="timer_d5385de0" data-update-every="1" tabindex="0" style="bottom:0;left:1;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">02</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
### Fundamental problem of causal inference 

In real life, we only observe **one** of the counterfactual scenarios

.pull-left[

|Person  |A  |Y  |Y&lt;sup&gt;a=1&lt;/sup&gt; |Y&lt;sup&gt;a=0&lt;/sup&gt; |Effect |
|:-------|:--|:--|:---------------|:---------------|:------|
|Anita   |1  |1  |1               |?               |?      |
|James   |0  |0  |?               |0               |?      |
|Min     |1  |1  |1               |?               |?      |
|Jackson |0  |0  |?               |0               |?      |
|Jesse   |0  |1  |?               |1               |?      |
|Maria   |1  |1  |1               |?               |?      |
]

--
.pull-right[

With a binary exposure, one counterfactual outcome is **observable** and one is **missing**. Thus, we can't estimate **individual causal effect** directly. It's a missing data issue. 

]

---
class:center, middle


## How do we answer causal questions in real life?


---

## Next topic

.bigger[

- Estimating the average causal effect

- Using randomized trials to identify causality


]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
